<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hidden Screenshots in Rails System Test Output | rlafranchi</title>
    <meta name="description" content="

I&#39;ve been having boat loads of fun finding uses for ActionCable beyond the chat app.  I reinvented two player pong a while back and have recently been search fo ...">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="alternate" type="application/rss+xml" href="https://rlafranchi.github.io/rss.xml" title="rlafranchi RSS Feed">
    
    <link rel="preload" href="/assets/css/0.styles.e75e83ed.css" as="style"><link rel="preload" href="/assets/js/app.79e45c90.js" as="script"><link rel="preload" href="/assets/js/6.b90c3e6b.js" as="script"><link rel="preload" href="/assets/js/4.36743f4f.js" as="script"><link rel="preload" href="/assets/js/32.1c26d5c6.js" as="script"><link rel="prefetch" href="/assets/js/1.e4fcd2d8.js"><link rel="prefetch" href="/assets/js/10.f9c1e48b.js"><link rel="prefetch" href="/assets/js/11.f5d105a6.js"><link rel="prefetch" href="/assets/js/12.3456f31c.js"><link rel="prefetch" href="/assets/js/13.7793bb49.js"><link rel="prefetch" href="/assets/js/14.f061e069.js"><link rel="prefetch" href="/assets/js/15.e53f4080.js"><link rel="prefetch" href="/assets/js/16.b3ff4261.js"><link rel="prefetch" href="/assets/js/17.05c4363e.js"><link rel="prefetch" href="/assets/js/18.1f07dcf3.js"><link rel="prefetch" href="/assets/js/19.73d8c73e.js"><link rel="prefetch" href="/assets/js/20.38cd0045.js"><link rel="prefetch" href="/assets/js/21.7a3d18f9.js"><link rel="prefetch" href="/assets/js/22.06e11986.js"><link rel="prefetch" href="/assets/js/23.5d5ad258.js"><link rel="prefetch" href="/assets/js/24.e94fa854.js"><link rel="prefetch" href="/assets/js/25.95b10bc1.js"><link rel="prefetch" href="/assets/js/26.cd245f39.js"><link rel="prefetch" href="/assets/js/27.1f694f9c.js"><link rel="prefetch" href="/assets/js/28.c6c51b5d.js"><link rel="prefetch" href="/assets/js/29.5364fb9a.js"><link rel="prefetch" href="/assets/js/30.f8f323ec.js"><link rel="prefetch" href="/assets/js/31.05890330.js"><link rel="prefetch" href="/assets/js/33.12f56799.js"><link rel="prefetch" href="/assets/js/34.aaf38614.js"><link rel="prefetch" href="/assets/js/5.516375af.js"><link rel="prefetch" href="/assets/js/7.a7a640b8.js"><link rel="prefetch" href="/assets/js/8.8759eba1.js"><link rel="prefetch" href="/assets/js/9.a4e8e5d1.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.67eead48.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e75e83ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">rlafranchi </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">About</a></li><li class="nav-item"><a href="/posts/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <a href="/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">rlafranchi </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">About</a></li><li class="mobile-nav-item"><a href="/posts/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li> <li class="mobile-nav-item"><a href="/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        Hidden Screenshots in Rails System Test Output
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">Richard LaFranchi</span> <!----></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2017-07-16T00:00:00.000Z">
      Sat Jul 15 2017
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-d832e844><a href="/tag/Ruby on Rails" data-v-d832e844> Ruby on Rails </a></li><li class="post-tag" data-v-d832e844><a href="/tag/Action Cable" data-v-d832e844> Action Cable </a></li><li class="post-tag" data-v-d832e844><a href="/tag/System Tester" data-v-d832e844> System Tester </a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h3 id="uses-for-action-cable-beyond-the-chat-app"><a href="#uses-for-action-cable-beyond-the-chat-app" class="header-anchor">#</a> Uses for Action Cable beyond the Chat App</h3> <p>I've been having boat loads of fun finding uses for ActionCable beyond the chat app.  I <a href="https://github.com/rlafranchi/pong" target="_blank" rel="noopener noreferrer">reinvented two player pong<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> a while back and have recently been search for solutions of outputting terminal commands to a web page.  The main purpose of this was to support test execution from the chrome extension for <a href="https://github.com/rlafranchi/system_tester" target="_blank" rel="noopener noreferrer">System Tester<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="streaming-the-output-line-by-line"><a href="#streaming-the-output-line-by-line" class="header-anchor">#</a> Streaming the Output Line by Line</h3> <p>With a bit of help from Stack Overflow, I used <code>pty</code> to setup a command handler for streaming the command output and created a simple helper to do so:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token comment"># app/models/command_handler.rb</span>
<span class="token keyword">require</span> <span class="token string">'pty'</span>
<span class="token keyword">class</span> <span class="token class-name">CommandHandler</span>
  attr_reader <span class="token symbol">:status</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">initialize</span></span><span class="token punctuation">(</span>cmd<span class="token punctuation">)</span>
    <span class="token variable">@cmd</span> <span class="token operator">=</span> cmd
    <span class="token variable">@status</span> <span class="token operator">=</span> <span class="token keyword">nil</span>
  <span class="token keyword">end</span>

  <span class="token comment"># getc = each character</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">run</span></span><span class="token punctuation">(</span><span class="token operator">&amp;</span>block<span class="token punctuation">)</span>
    status <span class="token operator">=</span> pty <span class="token keyword">do</span> <span class="token operator">|</span>r<span class="token punctuation">,</span>w<span class="token punctuation">,</span>pid<span class="token operator">|</span>
      <span class="token keyword">yield</span> r<span class="token punctuation">.</span>getc <span class="token keyword">until</span> r<span class="token punctuation">.</span>eof<span class="token operator">?</span>
      <span class="token constant">Process</span><span class="token punctuation">.</span>wait<span class="token punctuation">(</span>pid<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">run_each_line</span></span><span class="token punctuation">(</span><span class="token operator">&amp;</span>block<span class="token punctuation">)</span>
    status <span class="token operator">=</span> pty <span class="token keyword">do</span> <span class="token operator">|</span>r<span class="token punctuation">,</span>w<span class="token punctuation">,</span>pid<span class="token operator">|</span>
      r<span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>line<span class="token operator">|</span>
        <span class="token keyword">yield</span> line
      <span class="token keyword">end</span>
      <span class="token constant">Process</span><span class="token punctuation">.</span>wait<span class="token punctuation">(</span>pid<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>

  <span class="token keyword">private</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">pty</span></span><span class="token punctuation">(</span><span class="token operator">&amp;</span>block<span class="token punctuation">)</span>
    <span class="token constant">PTY</span><span class="token punctuation">.</span>spawn<span class="token punctuation">(</span><span class="token variable">@cmd</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>block<span class="token punctuation">)</span>
    <span class="token variable">@status</span> <span class="token operator">=</span> $<span class="token operator">?</span><span class="token punctuation">.</span>exitstatus
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre></div><h3 id="action-cable"><a href="#action-cable" class="header-anchor">#</a> Action Cable</h3> <p>With the command helper in place we can now broadcast each line to an appropriate channel and subscribe to it on the frontend.  To get colors to show up, it is simply a matter of replacing the appropriate characters.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token comment"># broadcast the output</span>
command_handler <span class="token operator">=</span> <span class="token constant">CommandHandler</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token string">&quot;bin/rails test:system&quot;</span><span class="token punctuation">)</span>
status <span class="token operator">=</span> command_handler<span class="token punctuation">.</span>run_each_line <span class="token keyword">do</span> <span class="token operator">|</span>line<span class="token operator">|</span>
  <span class="token constant">ActionCable</span><span class="token punctuation">.</span>server<span class="token punctuation">.</span>broadcast <span class="token string">&quot;output&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>output<span class="token punctuation">:</span> line<span class="token punctuation">}</span>
<span class="token keyword">end</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// handle on the client side</span>
App<span class="token punctuation">.</span>output <span class="token operator">=</span> App<span class="token punctuation">.</span>cable<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&quot;OutputChannel&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">received</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> status <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'status'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        status<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'running'</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> code <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'output'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        code<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> data<span class="token punctuation">.</span>output
            <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\[33m/g</span><span class="token punctuation">,</span> <span class="token string">'&lt;span style=&quot;color:yellow;&quot;&gt;'</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\[32m/g</span><span class="token punctuation">,</span> <span class="token string">'&lt;span style=&quot;color:green;&quot;&gt;'</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\[31m/g</span><span class="token punctuation">,</span> <span class="token string">'&lt;span style=&quot;color:red;&quot;&gt;'</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\[0m/g</span><span class="token punctuation">,</span> <span class="token string">'&lt;/span&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="the-discovery"><a href="#the-discovery" class="header-anchor">#</a> The Discovery</h3> <p>The Command Handler has two methods for outputting by each character or line by line.  I was originally hoping for a more real time output and went with the character by character.  The order in which the ActionCable broadcasts were received on the client side were unpredictable, so I also had to keep track of position.  I imaginge this was due to the fact of using the default async background handler.  In the end I decided to go with line by line.  I had already been familiar of how to get colors to show in bash terminals and was originally just running the test command without any system tests in place.  When I created and ran a failed system test using the output broadcaster I noticed an extra line in there.</p> <p><img src="/images/RailsHiddenScreenshots.png" alt="Rails Hidden Screenshots"></p> <p>Perfect! I had originally planned to implement a way of viewing screenshots in <a href="https://github.com/rlafranchi/system_tester" target="_blank" rel="noopener noreferrer">System Tester<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.  Now all I had to do was scrape it from the output.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// improved to handle images</span>
App<span class="token punctuation">.</span>output <span class="token operator">=</span> App<span class="token punctuation">.</span>cable<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&quot;OutputChannel&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">received</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> status <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'status'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        status<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'running'</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> screenshot <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'screenshot'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> code <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'output'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>output<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">']1337;'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> splitImg <span class="token operator">=</span> data<span class="token punctuation">.</span>output<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">';'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// Get the title</span>
            <span class="token keyword">var</span> imgTitle <span class="token operator">=</span> <span class="token function">atob</span><span class="token punctuation">(</span>splitImg<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'=name='</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// Get the height</span>
            <span class="token keyword">var</span> height <span class="token operator">=</span> splitImg<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'='</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment">// Get the Data</span>
            <span class="token keyword">var</span> imgData <span class="token operator">=</span> <span class="token string">'data:image/png;base64,'</span> <span class="token operator">+</span> splitImg<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            screenshot<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> <span class="token string">'&lt;p&gt;'</span> <span class="token operator">+</span> imgTitle <span class="token operator">+</span> <span class="token string">'&lt;/p&gt;'</span><span class="token punctuation">;</span>
            screenshot<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> <span class="token string">'&lt;img src=&quot;'</span> <span class="token operator">+</span> imgData <span class="token operator">+</span> <span class="token string">'&quot; alt=&quot;'</span> <span class="token operator">+</span> imgTitle <span class="token operator">+</span> <span class="token string">'&quot; height=&quot;'</span> <span class="token operator">+</span> height <span class="token operator">+</span> <span class="token string">'&quot;&gt;'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            code<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> data<span class="token punctuation">.</span>output
                <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\[33m/g</span><span class="token punctuation">,</span> <span class="token string">'&lt;span style=&quot;color:yellow;&quot;&gt;'</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\[32m/g</span><span class="token punctuation">,</span> <span class="token string">'&lt;span style=&quot;color:green;&quot;&gt;'</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\[31m/g</span><span class="token punctuation">,</span> <span class="token string">'&lt;span style=&quot;color:red;&quot;&gt;'</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\[0m/g</span><span class="token punctuation">,</span> <span class="token string">'&lt;/span&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>And that is that.  I hope this was useful for someone out there as it was for me.  If there are any projects out there who haven't started using ActionCable, a messaging or chat application is not the only use case so see what you can do with it.</p> <p>Demo App: <a href="https://github.com/rlafranchi/rails_terminal" target="_blank" rel="noopener noreferrer">https://github.com/rlafranchi/rails_terminal<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h3 active"><a href="#uses-for-action-cable-beyond-the-chat-app" title="Uses for Action Cable beyond the Chat App">Uses for Action Cable beyond the Chat App</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#streaming-the-output-line-by-line" title="Streaming the Output Line by Line">Streaming the Output Line by Line</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#action-cable" title="Action Cable">Action Cable</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#the-discovery" title="The Discovery">The Discovery</a></div></div></div></div> <form autocapitalize="off" autocomplete="off" class="console mini" data-v-342a5c4e><div class="entered-lines" data-v-342a5c4e></div> <div class="command-line" data-v-342a5c4e><label for="console" data-v-342a5c4e>&gt; </label> <input type="text" id="console" name="console" spellcheck="false" value="" data-v-342a5c4e> <span class="hint" style="padding-left:21px;" data-v-342a5c4e></span></div></form> <footer class="footer" data-v-cdcb074a><div class="footer-left-wrap" data-v-cdcb074a><ul class="contact" data-v-cdcb074a><li class="contact-item" data-v-cdcb074a><a href="https://github.com/rlafranchi" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-cdcb074a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-cdcb074a><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-cdcb074a></path></svg>
          
        </a></li><li class="contact-item" data-v-cdcb074a><a href="https://twitter.com/ralafranchi" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-cdcb074a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter" data-v-cdcb074a><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z" data-v-cdcb074a></path></svg>
          
        </a></li><li class="contact-item" data-v-cdcb074a><a href="mailto:rlafranchi@icloud.com" class="nav-link external" data-v-cdcb074a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail" data-v-cdcb074a><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" data-v-cdcb074a></path><polyline points="22,6 12,13 2,6" data-v-cdcb074a></polyline></svg>
          
        </a></li><li class="contact-item" data-v-cdcb074a><a href="https://www.linkedin.com/in/richard-lafranchi-95945988/" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-cdcb074a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-linkedin" data-v-cdcb074a><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z" data-v-cdcb074a></path><rect x="2" y="9" width="4" height="12" data-v-cdcb074a></rect><circle cx="4" cy="4" r="2" data-v-cdcb074a></circle></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-cdcb074a><ul class="copyright" data-v-cdcb074a><li class="copyright-item" data-v-cdcb074a>Copyright © 2015-present Richard LaFranchi</li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.79e45c90.js" defer></script><script src="/assets/js/6.b90c3e6b.js" defer></script><script src="/assets/js/4.36743f4f.js" defer></script><script src="/assets/js/32.1c26d5c6.js" defer></script>
  </body>
</html>
